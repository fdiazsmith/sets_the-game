<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/scripts/core_setup.js - future_cone</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="future_cone"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Possibility.html">Possibility</a></li>
            
                <li><a href="../classes/Story.html">Story</a></li>
            
                <li><a href="../classes/Theme.html">Theme</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/scripts/core_setup.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
	* Threejs.org
	*	this sets up a convinient way to structure the proyect
	*  
	*/

/**
	* GLOBAL VARIABLES
	
	* - define global variables
	*/

var container
	,	stats
	;

var width
	, height
	, steps = 0
	;


var cube
	, cubeGeometry
	, cubeMaterial
	, sphere
	, sphereGeometry
	, sphereMaterial
	;

var LIGHT_GRAY = 0xEEEEEE
	, NEON_GREEN = 0x00ff00
	, BLUE 			= 0x7777ff
	, SPOTLIGHT_COLOR = 0xffffff
	;



var camera, trackball, scene, renderer;

var cross;

init();
animate();
/**
	* I N I T 
	* - we need three things: 
	* 
	* @method scene
	* @method camera
	* @method renderer
	*/

	function init() {
		// assign global values
		width = window.innerWidth;
		height = window.innerHeight;

		// world - create a scene
		scene = new THREE.Scene();
		scene.fog = new THREE.FogExp2( 0xcccccc, 0.0042 );
		scene.position.x = 0;
		scene.position.y = 0;
		scene.position.z = 0;
		var worldAxes = new THREE.AxisHelper(10);
		scene.add(worldAxes);
		//camera
		//CombinedCamera breaks the DOM Events :( 
		camera = new THREE.PerspectiveCamera( 75, width/height, 0.1, 2000 );//THREE.CombinedCamera( width/ 2, height/ 2, 70, 1, 1000, - 500, 1000 );
		camera.position.x = 300;
		camera.position.y = 0;
		camera.position.z = 0;
		camera.lookAt(scene.position);
		var bgColor = new THREE.Color(LIGHT_GRAY);
		
		// lights
		var lighting    = new THREEx.ThreePointsLighting()
		scene.add(lighting)

		// renderer
		renderer = new THREE.WebGLRenderer( { antialias: false } );
		// renderer.setClearColor( scene.fog.color ); //don&#x27;t want it
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );

		// renderer = new THREE.CSS3DRenderer();
		// renderer.setSize( window.innerWidth, window.innerHeight );
		// renderer.domElement.style.position = &#x27;absolute&#x27;;

		container = document.getElementById( &#x27;container&#x27; );
		container.appendChild( renderer.domElement );

		// controls 
		trackball = new THREE.TrackballControls( camera , renderer.domElement);
		trackball.rotateSpeed = 1.0;
		trackball.zoomSpeed = 1.2;
		trackball.panSpeed = 0.8;
		trackball.noZoom = false;
		trackball.noPan = false;
		trackball.staticMoving = true;
		trackball.dynamicDampingFactor = 0.3;
		trackball.keys = [ 65, 83, 68 ];
		trackball.addEventListener( &#x27;change&#x27;, render );

		keyboard = new THREEx.KeyboardState();
		

		domEvents   = new THREEx.DomEvents(camera, renderer.domElement)



		//
		window.addEventListener( &#x27;resize&#x27;, onWindowResize, false );
		//
		initStats();
		initRendererStats();
		console.log(&quot;Finished initialization&quot;);
	 	// renderer.render(scene, camera);

	 	try{
		 	init_app();
	 	}
	 	catch(e){
	 		console.warn(e.message+&quot; better check it out&quot;);
	 	}
	 	
		render();

	}

function onWindowResize() {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
	trackball.handleResize();
	render();
}

function animate() {
	// if(/Users/fdiazsmith/Documents/Tellart/sandbox/future_cone/src/scripts/main.js) console.log(&quot;just pressed KeyboardState&quot;);
	steps+= gui_input.bouncingSpeed;
	posibility_one.position.x = 20+( 10*(Math.cos(steps)));
	posibility_one.position.y = 2 +( 10*Math.abs(Math.sin(steps)));

	trackball.update();
	render();
	requestAnimationFrame( animate );
}

function render() {
	renderer.render( scene, camera );
	stats.update();
	rendererStats.update(renderer);
}





/**
	*________________________________________________________________________________
	*/




// source : http://stackoverflow.com/questions/23514274/three-js-2d-text-sprite-labels
function TextSprite( message, parameters ) {
    if ( parameters === undefined ) parameters = {};
    
    var fontface = parameters.hasOwnProperty(&quot;fontface&quot;) ? parameters[&quot;fontface&quot;] : &quot;Arial&quot;;
    var fontsize = parameters.hasOwnProperty(&quot;fontsize&quot;) ? parameters[&quot;fontsize&quot;] : 18;
    var borderThickness = parameters.hasOwnProperty(&quot;borderThickness&quot;) ? parameters[&quot;borderThickness&quot;] : 4;
    var borderColor = parameters.hasOwnProperty(&quot;borderColor&quot;) ?parameters[&quot;borderColor&quot;] : { r:0, g:0, b:0, a:1.0 };
    var backgroundColor = parameters.hasOwnProperty(&quot;backgroundColor&quot;) ?parameters[&quot;backgroundColor&quot;] : { r:255, g:255, b:255, a:1.0 };
    var textColor = parameters.hasOwnProperty(&quot;textColor&quot;) ?parameters[&quot;textColor&quot;] : { r:0, g:0, b:0, a:1.0 };
    var position = parameters.hasOwnProperty(&quot;position&quot;) ?parameters[&quot;position&quot;] : [ 0, 0, 0 ];

    this.canvas = document.createElement(&#x27;canvas&#x27;);
    this.context = this.canvas.getContext(&#x27;2d&#x27;);
    this.context.font = &quot;Bold &quot; + fontsize + &quot;px &quot; + fontface;
    var metrics = this.context.measureText( message );
    var textWidth = metrics.width;

    this.context.fillStyle   = &quot;rgba(&quot; + backgroundColor.r + &quot;,&quot; + backgroundColor.g + &quot;,&quot; + backgroundColor.b + &quot;,&quot; + backgroundColor.a + &quot;)&quot;;
    this.context.strokeStyle = &quot;rgba(&quot; + borderColor.r + &quot;,&quot; + borderColor.g + &quot;,&quot; + borderColor.b + &quot;,&quot; + borderColor.a + &quot;)&quot;;

    this.context.lineWidth = borderThickness;
    //don&#x27;t round that is heidious
    // roundRect(this.context, borderThickness/2, borderThickness/2, (textWidth + borderThickness) * 1.1, fontsize * 1.4 + borderThickness, 8);

    this.context.fillStyle = &quot;rgba(&quot;+textColor.r+&quot;, &quot;+textColor.g+&quot;, &quot;+textColor.b+&quot;, 1.0)&quot;;
    this.context.fillText( message, borderThickness, fontsize + borderThickness);

    var texture = new THREE.Texture(this.canvas) 
    texture.minFilter = THREE.LinearFilter;
    texture.needsUpdate = true;

    var spriteMaterial = new THREE.SpriteMaterial( { map: texture, useScreenCoordinates: false } );
    this.sprite = new THREE.Sprite( spriteMaterial );
    this.sprite.scale.set(0.5 * fontsize, 0.25 * fontsize, 0.75 * fontsize);

    this.sprite.position.set( position[0],position[1],position[2] );
    // scene.add(this.sprite);
    // console.log(this.sprite);
    // return sprite;  
}

function roundRect(ctx, x, y, w, h, r){
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.lineTo(x+w-r, y);
    ctx.quadraticCurveTo(x+w, y, x+w, y+r);
    ctx.lineTo(x+w, y+h-r);
    ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);
    ctx.lineTo(x+r, y+h);
    ctx.quadraticCurveTo(x, y+h, x, y+h-r);
    ctx.lineTo(x, y+r);
    ctx.quadraticCurveTo(x, y, x+r, y);
    ctx.closePath();
    ctx.fill();
		ctx.stroke();   
}


var cickToWorldCoord = function(){
	var vector = new THREE.Vector3();
	vector.set(
	    ( event.clientX / window.innerWidth ) * 2 - 1,
	    - ( event.clientY / window.innerHeight ) * 2 + 1,
	    0.5 );
	vector.unproject( camera );
	var dir = vector.sub( camera.position ).normalize();
	var distance = - camera.position.z / dir.z;
	return camera.position.clone().add( dir.multiplyScalar( distance ) );
}
// Rotate an object around an arbitrary axis in object space
var rotObjectMatrix;
function rotateAroundObjectAxis(object, axis, radians) {
    rotObjectMatrix = new THREE.Matrix4();
    rotObjectMatrix.makeRotationAxis(axis.normalize(), radians);

    object.matrix.multiply(rotObjectMatrix);
    object.rotation.setFromRotationMatrix(object.matrix);
}

var rotWorldMatrix;
// Rotate an object around an arbitrary axis in world space       
function rotateAroundWorldAxis(object, axis, radians) {
    rotWorldMatrix = new THREE.Matrix4();
    rotWorldMatrix.makeRotationAxis(axis.normalize(), radians);
    rotWorldMatrix.multiply(object.matrix);                // pre-multiply

    object.matrix = rotWorldMatrix;
    // code for r59+:
    object.rotation.setFromRotationMatrix(object.matrix);
}

// Returns a random number between 0 (inclusive) and 1 (exclusive)
function getRandom() {
  return Math.random();
}
// Returns a random number between min (inclusive) and max (exclusive)
function getRandomArbitrary(min, max) {
  return Math.random() * (max - min) + min;
}
// Returns a random integer between min (included) and max (excluded)
// Using Math.round() will give you a non-uniform distribution!
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}
// Returns a random integer between min (included) and max (included)
// Using Math.round() will give you a non-uniform distribution!
function getRandomIntInclusive(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

makingStory = false;

/**
	* 	helper libs
	*/

function initStats() {
    stats = new Stats();
    stats.setMode(0); // 0: fps, 1: ms
    // Align top-left
    stats.domElement.style.position = &#x27;absolute&#x27;;
    stats.domElement.style.left = &#x27;0px&#x27;;
    stats.domElement.style.top = &#x27;0px&#x27;;
    document.getElementById(&quot;Stats-output&quot;).appendChild( stats.domElement );
    return stats;
}
function initRendererStats(){
	rendererStats   = new THREEx.RendererStats()
	rendererStats.domElement.style.position = &#x27;absolute&#x27;
	rendererStats.domElement.style.left = &#x27;0px&#x27;
	rendererStats.domElement.style.bottom   = &#x27;0px&#x27;
	document.body.appendChild( rendererStats.domElement )
}


	// handle keydown, return early if event is an autorepeat
	keyboard.domElement.addEventListener(&#x27;keydown&#x27;, function(event){
		if ( keyboard.eventMatches(event, &#x27;left&#x27;) ){
			// if (event.repeat) {
			// 	return;
			// }
			console.log(&quot;left&quot;, event)
		}
		if ( keyboard.eventMatches(event, &#x27;right&#x27;) ){
			console.log(&quot;right&quot;)
		}
		if ( keyboard.eventMatches(event, &#x27;up&#x27;) ){
			console.log(&quot;up&quot;)
		}
		if ( keyboard.eventMatches(event, &#x27;down&#x27;) ){
			console.log(&quot;down&quot;)
		}
		if ( keyboard.eventMatches(event, &#x27;shift+a&#x27;) ){
			if (event.repeat) {
				return;
			}
			makingStory = !makingStory;
			newStory(makingStory)
		}
	});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
