<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/scripts/Theme.js - future_cone</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="future_cone"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Possibility.html">Possibility</a></li>
            
                <li><a href="../classes/Story.html">Story</a></li>
            
                <li><a href="../classes/Theme.html">Theme</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/scripts/Theme.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
	* Theme 
	* 
	* A theme represents the cones, the lens in which the Stories are being situated.
	* a themes has conectric cone, axis of tension, future Possibilities and Story lines
	*
	* TODO:
	* -[ ] Add guide lines and sprites
	*/


 /**	
	* A theme represents the cones, the lens in which the Stories are being situated.
	* a themes has conectric cone, axis of tension, future Possibilities and Story lines
	*
	* @class Theme
	* @param {String} name - name for the Theme
	* @param {int}  length - legth the Theme will have in the 3Dworld
	* @param {int} radius - radius of the outermost cone
	* @param {object}  axis - object.x name of the x axis  object.y name of the y axis
	* @param {int} date - year of where the distant future ends.
	* @constructor
	*/



var Theme = function(name, length, radius, axis,distantFuture){
	try{

	self = this;
	self.axisOfTension = axis|| {
		x : &quot;Silicone&quot;,
		y : &quot;Biological&quot;
	}
	self.conectricConeCount = 3;
	self.coneLength  = length || 200;
	self.outerRadius = radius || 50;
	self.name = name || &quot;Biological Vs Silicone &quot;;
	self.parentCone = new THREE.Object3D();
	self.distantFuture = distantFuture !== undefined? distantFuture : 2065;	

	self.addCones();

	self.addSprites();

	self.axisLines();
	self.axisLables();


	self.createFutureScenario({
		color: 0xDE3926,
		name: &quot;today&quot;,
		description: &quot;The future starts now&quot;,
		year: 0,
		shape: &quot;tetrahedronGeometry&quot; //sphereGeometry
	});


	console.log(&quot;New Theme Created&quot;  , self );


	}
	catch(e){
		console.log(&quot;Error in theme&quot;,e)
	}
};



 /**	
	* @class Theme
	* @constructor
	*/

Theme.prototype.constructor = function(){
	console.log(&quot;dfs&quot;);
}
/**
	* Create a new Basic Material
	*
	* @method material
	* @return {THREE.material} material
	*/

Theme.prototype.material = new THREE.MeshBasicMaterial({
			transparent: true,
			opacity: 0.08,
			color: 0x2194ce,
			depthTest: true,
			visible: true,
			depthWrite: false,
			fog: true,
			side :THREE.DoubleSide ,
			combine: THREE.MixOperation, 
			reflectivity: 0.2 
		});
/**
	* Create a new Basic Material
	*
	* @method lineMaterial
	* @return {THREE.LineBasicMaterial} material
	*/

Theme.prototype.lineMaterial = new THREE.LineBasicMaterial({color: 0xffffff});
/**
	* Create a new  Basic Mesh
	*
	* @method mesh
	* @return {THREE.Mesh}  mesh
	*/
Theme.prototype.mesh = new THREE.Mesh( self.geometry, self.material );

/**
	* Stops adding new Possibilities on click
	*
	* @method today
	* @return {date} gives todays date.
	*/
Theme.prototype.today = function(){
 return new Date();
} 
/**
	* Calculate the position in the x axis 
	*
	* @method yearToPosition
	* @param {int} year for the position
	* @return {int} position of the x axis given a year as an input
	*/
Theme.prototype.yearToPosition = function(year){
	return Math.round(self.coneLength/((self.distantFuture - self.today().getFullYear()) / (year - self.today().getFullYear())))
};
/**
	* Calculate the year given the pos 
	*
	* @method possitionToYear
	* @param {int} pos in the X asix the year
	* @return {int} the year of the given position
	*/
Theme.prototype.positionToYear = function(pos){
	return Math.round(((pos * (self.distantFuture - self.today().getFullYear()) ) / self.coneLength )) + self.today().getFullYear();
};
/**
	* Creates the Geometry for the cones
	*
	* @method addCones
	* @param {boolean} toScene - if false it will not render to scene. 
	* @return 
	*/
Theme.prototype.addCones = function(toScene){
		//set up the cones
	self.coneGeometry = {
		posible   : new THREE.CylinderGeometry( self.outerRadius, 0, self.coneLength, 35, true ),
		plausible : new THREE.CylinderGeometry( self.outerRadius*2/3, 0, self.coneLength, 35, true ),
		probable  : new THREE.CylinderGeometry( self.outerRadius/3, 0, self.coneLength, 35, true )
	}
	for( geometry in self.coneGeometry){
		self.coneGeometry[geometry].name = geometry.toString()+&quot;_geometry&quot;;
	}
	self.coneMesh = {
		posible   : new THREE.Mesh( self.coneGeometry.posible, self.material ),
		plausible : new THREE.Mesh( self.coneGeometry.plausible, self.material ),
		probable  : new THREE.Mesh( self.coneGeometry.probable, self.material )
	}
	for( mesh in self.coneMesh){
		self.coneMesh[mesh].name = mesh.toString();
		self.parentCone.add(self.coneMesh[mesh]);
	}
	/*
		* @param {int} pointing - in Radians: controls where the cone is pointing at
		*/
	self.pointing = 0; 
	self.parentCone.rotateZ( Math.PI / 2 + Math.PI);
	self.parentCone.position.set( (self.coneLength/2), 0, 0);

	if( toScene || toScene === undefined) scene.add(self.parentCone);
};	
/**
	* Create sprites for cones names.
	*
	* @method addSprites
	* @return 
	*/
Theme.prototype.addSprites = function(){
	// makeTextSpritez for cones
	var cones_sprite = {};
	for (var i = 0; i &lt; self.parentCone.children.length; i++) {
		// cones_sprite[self.parentCone[i].name] = 22;
		cones_sprite[self.parentCone.children[i].name] = new TextSprite(self.parentCone.children[i].name, {
			fontsize : 30,
			textColor: 0xffffff,
			position: [self.coneLength, -(self.parentCone.children[i].geometry.parameters.radiusTop), -10]
			});
		cones_sprite[self.parentCone.children[i].name].sprite.visible = false;
		scene.add(cones_sprite[self.parentCone.children[i].name].sprite);
		// console.log(self.parentCone.children[i].name, self.parentCone.children[i].geometry.parameters.radiusTop);

		domEvents.addEventListener(self.parentCone.children[i], &#x27;mouseover&#x27;, function(event){
			// console.log(event.target.name, event);
			// today_date.sprite.visible
			cones_sprite[event.target.name].sprite.visible = true;
		});
		domEvents.addEventListener(self.parentCone.children[i], &#x27;mouseout&#x27;, function(event){
			// console.log(event.target.name);
			// today_date.sprite.visible
			cones_sprite[event.target.name].sprite.visible = false;
		});
	}
};
/**
	* Add the lines that help draw the main axis.
	*
	* @method axisLines
	* @param {boolean} toScene - if false it will not render to scene. 
	* @return 
	*/
Theme.prototype.axisLines = function(toScene){
	// geometry - lines 
	var geometry = new THREE.Geometry();
	    geometry.vertices.push(new THREE.Vector3(self.coneLength, self.outerRadius, 0));
	    geometry.vertices.push(new THREE.Vector3(self.coneLength, -self.outerRadius, 0));
	line_vertical = new THREE.Line(geometry, self.lineMaterial);

	var geometry = new THREE.Geometry();
	geometry.vertices.push(new THREE.Vector3(self.coneLength, 0, self.outerRadius));
	geometry.vertices.push(new THREE.Vector3(self.coneLength, 0, -self.outerRadius));
	line_horizontal = new THREE.Line(geometry, self.lineMaterial);

	var geometry = new THREE.Geometry();
	geometry.vertices.push(new THREE.Vector3(0, -self.outerRadius, 0));
	geometry.vertices.push(new THREE.Vector3(self.coneLength, -self.outerRadius, 0));
	line_bottom = new THREE.Line(geometry, self.lineMaterial);

	var geometry = new THREE.Geometry();
	geometry.vertices.push(new THREE.Vector3(0, 0, 0));
	geometry.vertices.push(new THREE.Vector3(0, -self.outerRadius, 0));
	line_back = new THREE.Line(geometry, self.lineMaterial);


	if( toScene || toScene === undefined){
		scene.add(line_back);
		scene.add(line_vertical);
		scene.add(line_horizontal);
		scene.add(line_bottom);
	}
	// return line_back;
};
/**
	* Make axis of tension lables
	* 
	*
	* @method axisLables
	* @param {boolean} toScene - if false it will not render to scene. 
	* @return 
	*/
Theme.prototype.axisLables = function(toScene){
	//Makes 
	today_date = new TextSprite(&quot;Year &quot;+self.today().getFullYear(), {
		fontsize : 55,
		textColor: 0xffffff,
		position: [0,-self.outerRadius , 0]
	});
	future_date = new TextSprite(&quot;Year &quot;+self.distantFuture, {
		fontsize : 55,
		textColor: 0xffffff,
		position: [self.coneLength,-self.outerRadius , 0]
	});

	quad_sprite = new TextSprite(self.axisOfTension.y+&quot; growth&quot;, {
		fontsize : 25,
		textColor: 0xffffff,
		position: [self.coneLength,self.outerRadius ,self.outerRadius  ]
	});

	quad1_sprite = new TextSprite(self.axisOfTension.y+&quot; recession&quot;, {
		fontsize : 25,
		textColor: 0xffffff,
		position: [self.coneLength,-self.outerRadius ,self.outerRadius  ]
	});

	quad3_sprite = new TextSprite(self.axisOfTension.x+&quot; growth&quot;, {
		fontsize : 25,
		textColor: 0xffffff,
		position: [self.coneLength,self.outerRadius , -self.outerRadius  ]
	});
	quad4_sprite = new TextSprite(self.axisOfTension.x+&quot; recession&quot;, {
		fontsize : 25,
		textColor: 0xffffff,
		position: [self.coneLength,-self.outerRadius , -self.outerRadius  ]
	});

	

	if( toScene || toScene === undefined){
		scene.add(today_date.sprite);
		scene.add(future_date.sprite);

		scene.add(quad_sprite.sprite);		
		scene.add(quad1_sprite.sprite);
		scene.add(quad3_sprite.sprite);
		scene.add(quad4_sprite.sprite);
	}
};




/**	
	* This is the actual contructor for the Possibility
	* for some reason the DomEvent listener did not work properly when placed inside
	* the Possibility class. 
	*
	* @method createFutureScenario
	* @return {Possibility} the possibility just created
	*/
Theme.prototype.createFutureScenario = function(){
	switch(arguments.length){
				case 0 :
            madeByUser();
            break;
        case 1 :
        		madeByUserUsingCode(arguments[0]);
            break;
        default:
        		madeByComputer(arguments[0],arguments[1],arguments[2], arguments[3]);
        		break;
	}
	function madeByUser(){
		if($(&#x27;body&#x27;).find(&quot;#create-possibility&quot;).length === 0){
			// console.log(&quot;dfsa&quot;, $(&#x27;body&#x27;).find(&quot;#info-card&quot;));
						$(&#x27;&lt;div id=&quot;create-possibility&quot;&gt;&lt;fieldset&gt;&lt;legend&gt;Create new Possibility&lt;/legend&gt;&lt;form&gt;&lt;input name=&quot;name&quot; id=&quot;pos-name&quot;type=&quot;text&quot; placeholder=&quot;Name&quot;&gt;&lt;/form&gt;&lt;form&gt;&lt;input name=&quot;description&quot; type=&quot;text&quot; placeholder=&quot;Description&quot;&gt;&lt;/form&gt;&lt;form&gt;&lt;label name=&quot;year&quot; for=&quot;position&quot;&gt; Year &lt;/label&gt;&lt;input name=&quot;position&quot; type=&quot;number&quot; &gt;&lt;/form&gt;         &lt;form&gt;&lt;label for=&quot;quad&quot; &gt;Select list&lt;/label&gt;&lt;select name=&quot;quad&quot; id=&quot;myList&quot;&gt;&lt;option value = &quot;1&quot;&gt;one&lt;/option&gt;&lt;option value = &quot;2&quot;&gt;two&lt;/option&gt;&lt;option value = &quot;3&quot;&gt;three&lt;/option&gt;&lt;option value = &quot;4&quot;&gt;four&lt;/option&gt;&lt;/select&gt;&lt;/form&gt;&lt;form&gt;&lt;label for=&quot;quad&quot; &gt;Select shape&lt;/label&gt;&lt;select name=&quot;shape&quot; id=&quot;myList&quot;&gt;&lt;option value = &quot;sphereGeometry&quot;&gt;Sphere&lt;/option&gt;&lt;option value = &quot;tetrahedronGeometry&quot;&gt;Tetrahedron&lt;/option&gt;&lt;option value = &quot;octahedronGeometry&quot;&gt;Octahedron&lt;/option&gt;&lt;option value = &quot;icosahadronGeometry&quot;&gt;Icosahedron&lt;/option&gt;&lt;/select&gt;&lt;/form&gt;&lt;form &gt;&lt;button type=&quot;submit&quot; &gt;ddd&lt;/button&gt;  &lt;/form&gt;&lt;/fieldset&gt;&lt;/div&gt; &#x27;,{
				&quot;id&quot;: &quot;create-possibility&quot;
			}).appendTo(&quot;body&quot;);
		}

		
		$(&quot;#create-possibility&quot;).fadeIn();
		$(&quot;#create-possibility form&quot;).submit( function(e){
			e.preventDefault();
			console.log(&quot;submit&quot;, $(e.target).parent().find(&#x27;[name=&quot;position&quot;]&#x27;).val() );
			var lastPushed = all_Possibilities.push(new Possibility({
				color: 0xffffff ,
				name: $(e.target).parent().find(&#x27;[name=&quot;name&quot;]&#x27;).val(),
				description: $(e.target).parent().find(&#x27;[name=&quot;description&quot;]&#x27;).val(),
				year: $(e.target).parent().find(&#x27;[name=&quot;position&quot;]&#x27;).val(),
				shape:$(e.target).parent().find(&#x27;[name=&quot;shape&quot;]&#x27;).val(),
				radius: 1
			}));
			console.log(lastPushed,all_Possibilities)

			domEvents.addEventListener(all_Possibilities[lastPushed-1].mesh, &#x27;click&#x27;, function(event){
				all_Possibilities[lastPushed-1].showContent(event);
			});
			$(&quot;#create-possibility form&quot;).off(&quot;submit&quot;);
			$(&quot;#create-possibility&quot;).fadeOut();
		});	

	}
	function madeByUserUsingCode( parameters){
		var lastPushed = all_Possibilities.push(new Possibility({
			color:       (parameters.hasOwnProperty(&quot;color&quot;))?       parameters[&quot;color&quot;] :0x333333 ,
			name: 			 (parameters.hasOwnProperty(&quot;name&quot;))?        parameters[&quot;name&quot;] : &quot;&quot;,
			description: (parameters.hasOwnProperty(&quot;description&quot;))? parameters[&quot;description&quot;] : &quot;&quot;,
			year:        (parameters.hasOwnProperty(&quot;year&quot;))?        parameters[&quot;year&quot;] : 0,
			shape:       (parameters.hasOwnProperty(&quot;shape&quot;))?       parameters[&quot;shape&quot;] : sphereGeometry,
			radius:      (parameters.hasOwnProperty(&quot;radius&quot;))?      parameters[&quot;radius&quot;] : 1
		}));
		domEvents.addEventListener(all_Possibilities[lastPushed-1].mesh, &#x27;click&#x27;, function(event){
			all_Possibilities[lastPushed-1].showContent(event);
		});
	}

	function madeByComputer(name, size, pos, col){
		name = new Possibility( size, pos, col );
		domEvents.addEventListener(name.mesh, &#x27;click&#x27;, function(event){
			name.showContent(event);
		});
	}

	return name;
}
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
